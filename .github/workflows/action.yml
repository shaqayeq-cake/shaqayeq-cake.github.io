name: Manual Zip Extractor

on:
  push:
    paths:
      - 'site.zip'  # âš ï¸ Ø§Ú©Ø´Ù† ÙÙ‚Ø· ÙˆÙ‚ØªÛŒ Ø§Ø¬Ø±Ø§ Ù…ÛŒØ´Ù‡ Ú©Ù‡ ÙØ§ÛŒÙ„ÛŒ Ø¨Ø§ Ø§ÛŒÙ† Ø§Ø³Ù… Ø¯Ù‚ÛŒÙ‚ Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒ

permissions:
  contents: write   # Ø§Ø¬Ø§Ø²Ù‡ Ù…ÛŒØ¯Ù‡ Ú©Ù‡ Ø§Ú©Ø´Ù† Ø¨ØªÙˆÙ†Ù‡ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø±Ùˆ ØªØºÛŒÛŒØ± Ø¨Ø¯Ù‡ Ùˆ Ú©Ø§Ù…ÛŒØª Ú©Ù†Ù‡

jobs:
  unzip-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Unzip and Move Files
        run: |
          echo "Found site.zip! Extracting..."
          
          # 1. Ø³Ø§Ø®ØªÙ† ÛŒÚ© Ù¾ÙˆØ´Ù‡ Ù…ÙˆÙ‚Øª
          mkdir temp_extract
          
          # 2. Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ø²ÛŒÙ¾ ØªÙˆÛŒ Ø§ÙˆÙ† Ù¾ÙˆØ´Ù‡ (-o ÛŒØ¹Ù†ÛŒ overwrite Ú©Ù† Ø§Ú¯Ù‡ Ú†ÛŒØ²ÛŒ Ø¨ÙˆØ¯)
          unzip -o site.zip -d temp_extract
          
          # 3. Ø§Ù†ØªÙ‚Ø§Ù„ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø¨Ù‡ Ø±ÙˆØª Ø§ØµÙ„ÛŒ
          # Ù†Ú©ØªÙ‡: Ø§Ú¯Ø± ØªÙˆÛŒ Ø²ÛŒÙ¾Øª Ù¾ÙˆØ´Ù‡ dist Ù‡Ø³ØªØŒ Ø®Ø· Ù¾Ø§ÛŒÛŒÙ† Ø±Ùˆ Ø¨Ù‡ temp_extract/dist/* ØªØºÛŒÛŒØ± Ø¨Ø¯Ù‡
          cp -r temp_extract/* .
          
          # 4. Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙØ§ÛŒÙ„ Ø²ÛŒÙ¾ Ùˆ Ù¾ÙˆØ´Ù‡ Ù…ÙˆÙ‚Øª (Ø¨Ø±Ø§ÛŒ ØªÙ…ÛŒØ² Ù…ÙˆÙ†Ø¯Ù† Ø±ÛŒÙ¾Ùˆ)
          rm site.zip
          rm -rf temp_extract

      - name: Commit and Push Changes
        run: |
          git config --global user.name "Auto Deploy Bot"
          git config --global user.email "bot@noreply.github.com"
          
          git add .
          git commit -m "ğŸš€ Auto-extracted static files" || echo "No changes to commit"
          git push
